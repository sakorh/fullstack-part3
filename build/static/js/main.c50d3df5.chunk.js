(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),a=t(3),u=t(1),o=t(0),i=function(e){var n=e.newFilter,t=e.filterNames;return Object(o.jsxs)("div",{children:["filter shown with",Object(o.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.addPerson,t=e.newName,c=e.newNumber,r=e.handleNameChange,a=e.handleNumberChange;return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name:",Object(o.jsx)("input",{value:t,onChange:r})]}),Object(o.jsxs)("div",{children:["number:",Object(o.jsx)("input",{value:c,onChange:a})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})})},s=function(e){var n=e.person,t=e.deleteName;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("p",{children:[n.name," ",n.number,Object(o.jsx)("button",{onClick:t,children:"delete"})]})})},d=function(e){var n=e.namesToShow,t=e.deleteName;return Object(o.jsx)("div",{children:n.map((function(e){return Object(o.jsx)(s,{person:e,deleteName:function(){return t(e.id)}},e.id)}))})},j=t(4),b=t.n(j),f="/api/people",m={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},deleteName:function(e){return b.a.delete("".concat(f,"/").concat(e))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},h=function(e){var n=e.success,t=e.error;return null===n&&null===t?null:null===t?Object(o.jsx)("div",{className:"success",children:n}):Object(o.jsx)("div",{className:"error",children:t})},O=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),s=Object(a.a)(r,2),j=s[0],b=s[1],f=Object(u.useState)(""),O=Object(a.a)(f,2),p=O[0],v=O[1],w=Object(u.useState)(""),x=Object(a.a)(w,2),N=x[0],g=x[1],C=Object(u.useState)(null),S=Object(a.a)(C,2),T=S[0],k=S[1],L=Object(u.useState)(null),y=Object(a.a)(L,2),A=y[0],D=y[1];Object(u.useEffect)((function(){m.getAll().then((function(e){c(e)}))}),[]);var F=N?t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})):t;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(h,{success:T,error:A}),Object(o.jsx)(i,{newFilter:N,filterNames:function(e){g(e.target.value)}}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(l,{addPerson:function(e){if(e.preventDefault(),t.map((function(e){return e.name.toLowerCase()})).includes(j.toLowerCase())){var n=t.find((function(e){return e.name.toLowerCase()===j.toLowerCase()}));if(n.number===p)window.alert("".concat(j," is already added to phonebook"));else if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var r={name:n.name,number:p};m.update(n.id,r).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),b(""),v(""),k("Updated ".concat(e.name,"'s number")),setTimeout((function(){k(null)}),5e3)})).catch((function(e){D("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){D(null)}),5e3),c(t.filter((function(e){return e.id!==n.id})))}))}}else{var a={name:j,number:p};m.create(a).then((function(e){c(t.concat(e)),b(""),v(""),k("Added ".concat(e.name)),setTimeout((function(){k(null)}),5e3)})).catch((function(e){D(e.response.data.error),setTimeout((function(){D(null)}),5e3)}))}},newName:j,newNumber:p,handleNameChange:function(e){b(e.target.value)},handleNumberChange:function(e){v(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(d,{namesToShow:F,deleteName:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&m.deleteName(e).then((function(){c(t.filter((function(n){return n.id!==e}))),k("Deleted ".concat(n.name)),setTimeout((function(){k(null)}),5e3)}))}})]})};t(40);r.a.render(Object(o.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.c50d3df5.chunk.js.map